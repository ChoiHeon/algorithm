# # https://www.acmicpc.net/problem/5373


for _ in range(int(input())):
    u = [['w'] for _ in range(9)]
    d = [['y'] for _ in range(9)]
    f = [['r'] for _ in range(9)]
    b = [['o'] for _ in range(9)]
    l = [['g'] for _ in range(9)]
    r = [['b'] for _ in range(9)]

    q = {'U':u, 'D':d, 'F':f, 'R':r, 'B':b, 'L':l}

    s = dict()
    s['U'] = [b[2], b[1], b[0], r[2], r[1], r[0], f[2], f[1], f[0], l[2], l[1], l[0]]
    s['D'] = [f[6], f[7], f[8], r[6], r[7], r[8], b[6], b[7], b[8], l[6], l[7], l[8]]
    s['F'] = [u[6], u[7], u[8], r[0], r[3], r[6], d[2], d[1], d[0], l[8], l[5], l[2]]
    s['R'] = [u[8], u[5], u[2], b[0], b[3], b[6], d[8], d[5], d[2], f[8], f[5], f[2]]
    s['B'] = [u[2], u[1], u[0], l[0], l[3], l[6], d[6], d[7], d[8], r[8], r[5], r[2]]
    s['L'] = [u[0], u[3], u[6], f[0], f[3], f[6], d[0], d[3], d[6], b[8], b[5], b[2]]

    input()
    for cmd in input().split():
        if cmd[1] == '+':
            s[cmd[0]][0][0], s[cmd[0]][1][0], s[cmd[0]][2][0], s[cmd[0]][3][0], s[cmd[0]][4][0], s[cmd[0]][5][0],\
            s[cmd[0]][6][0], s[cmd[0]][7][0], s[cmd[0]][8][0], s[cmd[0]][9][0], s[cmd[0]][10][0], s[cmd[0]][11][0] = \
            s[cmd[0]][9][0], s[cmd[0]][10][0], s[cmd[0]][11][0], s[cmd[0]][0][0], s[cmd[0]][1][0], s[cmd[0]][2][0], \
            s[cmd[0]][3][0], s[cmd[0]][4][0], s[cmd[0]][5][0], s[cmd[0]][6][0], s[cmd[0]][7][0], s[cmd[0]][8][0]

            q[cmd[0]][0][0], q[cmd[0]][1][0], q[cmd[0]][2][0], q[cmd[0]][3][0], q[cmd[0]][4][0], q[cmd[0]][5][0], \
            q[cmd[0]][6][0], q[cmd[0]][7][0], q[cmd[0]][8][0] = \
            q[cmd[0]][6][0], q[cmd[0]][3][0], q[cmd[0]][0][0], q[cmd[0]][7][0], q[cmd[0]][4][0], q[cmd[0]][1][0], \
            q[cmd[0]][8][0], q[cmd[0]][5][0], q[cmd[0]][2][0]
        else:
            s[cmd[0]][0][0], s[cmd[0]][1][0], s[cmd[0]][2][0], s[cmd[0]][3][0], s[cmd[0]][4][0], s[cmd[0]][5][0], \
            s[cmd[0]][6][0], s[cmd[0]][7][0], s[cmd[0]][8][0], s[cmd[0]][9][0], s[cmd[0]][10][0], s[cmd[0]][11][0] = \
            s[cmd[0]][3][0], s[cmd[0]][4][0], s[cmd[0]][5][0], s[cmd[0]][6][0], s[cmd[0]][7][0], s[cmd[0]][8][0], \
            s[cmd[0]][9][0], s[cmd[0]][10][0], s[cmd[0]][11][0], s[cmd[0]][0][0], s[cmd[0]][1][0], s[cmd[0]][2][0]

            q[cmd[0]][0][0], q[cmd[0]][1][0], q[cmd[0]][2][0], q[cmd[0]][3][0], q[cmd[0]][4][0], q[cmd[0]][5][0], \
            q[cmd[0]][6][0], q[cmd[0]][7][0], q[cmd[0]][8][0] = \
            q[cmd[0]][2][0], q[cmd[0]][5][0], q[cmd[0]][8][0], q[cmd[0]][1][0], q[cmd[0]][4][0], q[cmd[0]][7][0], \
            q[cmd[0]][0][0], q[cmd[0]][3][0], q[cmd[0]][6][0]

    for i in range(3):
        print(''.join([u[3*i+j][0] for j in range(3)]))

